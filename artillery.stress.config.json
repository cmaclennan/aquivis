{
  "config": {
    "target": "http://localhost:3000",
    "phases": [
      {
        "duration": 30,
        "arrivalRate": 5
      },
      {
        "duration": 120,
        "arrivalRate": 10,
        "rampTo": 20
      },
      {
        "duration": 60,
        "arrivalRate": 20
      }
    ],
    "plugins": {
      "expect": {}
    },
    "processor": "./scripts/artillery-processor.js",
    "defaults": {
      "headers": {
        "Cookie": "e2e-auth=%7B%22id%22%3A%22b7a25f50-809d-4803-9bd8-9f4d31dfdd1a%22%2C%22email%22%3A%22craig.maclennan%40gmail.com%22%2C%22role%22%3A%22owner%22%2C%22company_id%22%3A%2288a16083-7a28-48ce-b710-92837af61677%22%7D",
        "x-user-id": "b7a25f50-809d-4803-9bd8-9f4d31dfdd1a",
        "x-user-email": "craig.maclennan@gmail.com",
        "x-user-role": "owner",
        "x-user-company-id": "88a16083-7a28-48ce-b710-92837af61677",
        "x-e2e-bypass": "1",
        "content-type": "application/json"
      }
    }
  },
  "scenarios": [
    {
      "name": "Read endpoints",
      "flow": [
        {
          "get": {
            "url": "/api/reports/lookups",
            "expect": [
              {
                "statusCode": 200
              }
            ],
            "afterResponse": "recordServerTiming"
          }
        },
        {
          "get": {
            "url": "/api/templates",
            "expect": [
              {
                "statusCode": 200
              }
            ],
            "afterResponse": "recordServerTiming"
          }
        },
        {
          "get": {
            "url": "/api/units",
            "expect": [
              {
                "statusCode": 200
              }
            ],
            "afterResponse": "recordServerTiming"
          }
        }
      ]
    },
    {
      "name": "Reports endpoints",
      "flow": [
        {
          "post": {
            "url": "/api/reports/services",
            "json": {
              "dateRange": "custom",
              "startDate": "2025-09-27",
              "endDate": "2025-10-27",
              "limit": 100
            },
            "expect": [
              {
                "statusCode": 200
              }
            ],
            "afterResponse": "recordServerTiming"
          }
        },
        {
          "post": {
            "url": "/api/reports/chemicals/summary",
            "json": {
              "dateRange": "custom",
              "startDate": "2025-09-27",
              "endDate": "2025-10-27"
            },
            "expect": [
              {
                "statusCode": 200
              }
            ],
            "afterResponse": "recordServerTiming"
          }
        },
        {
          "post": {
            "url": "/api/reports/equipment/logs",
            "json": {
              "startDate": "2025-09-27",
              "endDate": "2025-10-27",
              "limit": 100
            },
            "expect": [
              {
                "statusCode": 200
              }
            ],
            "afterResponse": "recordServerTiming"
          }
        }
      ]
    }
  ]
}